<ol class="breadcrumb breadCrumb" data-ng-init="getTaskInfo()">
  <li><a ng-href="#/dashboard">Dashboard</a></li>
  <li><a ng-href="#/project/{{projectId}}">Project</a></li>
  <li><a ng-href="#/project/{{projectId}}/board/{{boardId}}">Board</a></li>
  <li class="active">{{task.title|capitalize}}</li>
</ol>

<div class="col-md-9 noPaddingLeft">
  <h2>{{task.title|capitalize}} </h2>
  <div>
    <div class="taskDescription">
      {{task.description}}
    </div>
  </div>

  <div ng-if="task.comments.length > 0">
    <h4>
      <span>Comments</span>
    </h4>
    <div ng-repeat="comment in task.comments | limitTo:5">
      <div class="comment">
        <div class="commentHeader row">
          <div class="col-md-4 noPaddingLeft">
            <img ng-src="{{comment.user.imageUrl}}" alt="profilepic" class="smallerAvatar"> {{comment.user.firstname}} {{comment.user.lastname}}
          </div>
          <div class="col-md-8 text-right commentDate noPaddingRight">
            {{comment.timeStamp|date:'dd MMM yyyy HH:mm'}}
            <button ng-if="isCommentCreator(comment)" type="button" class="btn btn-primary btn-xs" ng-click="editText($index)"><i class="fa fa-pencil"></i> Edit</button>
            <button ng-if="isCommentCreator(comment)||isTaskCreator()" type="button" class="btn btn-danger btn-xs" ng-click="deleteComment(comment)"><i class="fa fa-trash"></i> Delete</button>


          </div>
        </div>

        <div  ta-bind ng-model="comment.comment" class="commentBody" ng-hide="booleanArray[$index]" >{{comment.comment}}</div>

        <text-angular ta-toolbar="[['h1','h2','h3'],['bold','italics','underline'],['ul','ol'],['taskFind']]" ng-model="commentEdit" ng-show="booleanArray[$index]"></text-angular>
        <button type="button" ng-click="editComment(comment,commentEdit, $index)" class="btn btn-success" ng-show="booleanArray[$index]">Save</button>


      </div>
    </div>
    <hr/>
  </div>



<!--<comment-form>

</comment-form>-->
  <h2>Preview</h2>
  <div ta-bind ng-model="comment"></div>

  <text-angular ta-toolbar="[['h1','h2','h3'],['bold','italics','underline'],['ul','ol'],['taskFind']]" ng-model="comment" id="editor"></text-angular>
  <button type="button" class="btn btn-success" ng-click="createComment(comment)"><i class="fa fa-comment-o"></i> Comment
  </button>
</div>
<div class="col-md-3 noPaddingRight">
  <div class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title">
        <div class="row">
          <div class="col-md-6" style="padding-top:6px;">

            {{task.identifier}}
          </div>
          <div ng-if="isCreator()" class="col-md-6">
            <div class="pull-right">
              <button type="button" ng-click="openUpdateTaskModal()" class="btn btn-primary"><i class="fa fa-pencil"></i> Update</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="panel-body">
      <ul class="list-unstyled">
        <li>
          <div class="row">
            <div class="col-md-4">
              <label>Title: </label>
            </div>
            <div class="col-md-8">
              <span ng-show="titleVisible" ng-mouseenter="titleVisible = !titleVisible">{{task.title}}</span>
              <input ng-show="!titleVisible" type="text" ng-model="task.title" class="form-control" ng-blur="titleVisible=!titleVisible && updateTask()" ng-keypress="saveTitle()">
            </div>
          </div>
        </li>
        <li>
          <div class="row">
            <div class="col-md-4">
              <label>State: </label>
            </div>
            <div class="col-md-8">
              <span ng-show="stateVisible" ng-mouseenter="stateVisible = !stateVisible">{{task.state}}</span>
              <ui-select ng-show="!stateVisible" ng-change="changeState(task.state)" tagging theme="bootstrap" tagging-label="false" tagging-tokens=",|ENTER|TAB"
                         ng-model="task.state" ng-disabled="stateVisible" title="Assignee "
                         search-enabled="true" required>
                <ui-select-match placeholder="State">{{$select.selected}}</ui-select-match>
                <ui-select-choices repeat="state in boardStates">
                  {{state}}
                </ui-select-choices>
              </ui-select>
            </div>
          </div>
        </li>
        <li>
          <div class="row">
            <div class="col-md-4">
              <label>Deadline: </label>
            </div>
            <div class="col-md-8">
              <span ng-show="task.deadline"> {{task.deadline|date}} </span>
              <span ng-show="task.deadline==null"> No deadline given </span>

            </div>
          </div>
        </li>
        <li>
          <div class="row">
            <div class="col-md-4">
              <label>Assignee: </label>
            </div>
            <div class="col-md-8">
              <img ng-src="{{task.assignee.imageUrl}}" alt="profilepic" class="smallerAvatar" ng-show="visible">
              <span ng-show="visible" ng-mouseenter="visible = !visible">{{task.assignee.firstname}} {{task.assignee.lastname}}</span>
              <ui-select ng-show="!visible" ng-change="changeAssignee(task.assignee)" tagging theme="bootstrap" tagging-label="false" tagging-tokens=",|ENTER|TAB"
                         ng-model="task.assignee" ng-disabled="visible" title="Assignee "
                         search-enabled="true" required>
                <ui-select-match placeholder="Assignee">{{$select.selected.firstname}}</ui-select-match>
                <ui-select-choices repeat="collab in collaborators">
                  {{collab.firstname}}
                </ui-select-choices>
              </ui-select>
            </div>
          </div>
        </li>
        <li>
          <div class="row">
            <div class="col-md-4">
              <label>Creator: </label>
            </div>
            <div class="col-md-8">
              <img ng-src="{{task.creator.imageUrl}}" alt="profilepic" class="smallerAvatar"> <span>{{task.creator.firstname}} {{task.creator.lastname}}</span>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>


